(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5996],{93615:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(54568),a=n(7620),o=n(89220),i=n(95224),l=n(15062),u=n(62147),s=n(12522);const d=(0,a.forwardRef)((e,t)=> {const{equation:n,setEquation:a,inline:o}=e,i=e=>{a(e.target.value)};return o&&t instanceof HTMLInputElement?(0,r.jsxs)("span",{className:"EquationEditor_inputBackground bg-background",children:[(0,r.jsx)("span",{className:"EquationEditor_dollarSign text-muted-foreground text-left",children:"$"}),(0,r.jsx)("input",{className:"EquationEditor_inlineEditor text-primary m-0 resize-none border-0 bg-inherit p-0 outline-none",value:n,onChange:i,autoFocus:!0,ref:t}),(0,r.jsx)("span",{className:"EquationEditor_dollarSign text-muted-foreground text-left",children:"$"})]}):(0,r.jsxs)("div",{className:"EquationEditor_inputBackground bg-background",children:[(0,r.jsx)("span",{className:"EquationEditor_dollarSign text-muted-foreground text-left",children:"$$\n"}),(0,r.jsx)("textarea",{className:"EquationEditor_blockEditor text-primary m-0 w-full resize-none border-0 bg-inherit p-0 outline-none",value:n,onChange:i,ref:t}),(0,r.jsx)("span",{className:"EquationEditor_dollarSign text-muted-foreground text-left",children:"\n$$"})]})});var c=n(75056),E=n(64969);function f(e){const{equation:t,inline:n,nodeKey:f}=e,[g]=(0,o.DF)(),m=(0,i.a)(),[x,p]=(0,a.useState)(t),[h,b]=(0,a.useState)(!1),_=(0,a.useRef)(null),q=(0,a.useCallback)(e=>{b(!1),g.update(()=>{const t=(0,u.nsf)(f);(0,E.R_)(t)&&(t.setEquation(x),e&&t.selectNext(0,0))})},[g,x,f]);return(0,a.useEffect)(()=>{h||x===t||p(t)},[h,t,x]),(0,a.useEffect)(()=>{if(m)if(h)return(0,l.Sd)(g.registerCommand(u.MvL,e=>{const t=document.activeElement;return _.current!==t&&q(),!1},u.WgU),g.registerCommand(u.Q$N,e=>{const t=document.activeElement;return _.current===t&&(q(!0),!0)},u.WgU));else return g.registerUpdateListener(e=>{const{editorState:t}=e;t.read(()=>{const e=(0,u.vJq)();return(0,u.RTZ)(e)&&e.has(f)&&1===e.getNodes().length})&&b(!0)})},[g,f,q,h,m]),(0,r.jsx)(r.Fragment,{children:h&&m?(0,r.jsx)(d,{equation:x,setEquation:p,inline:n,ref:_}):(0,r.jsx)(s.ErrorBoundary,{onError:e=>g._onError(e),fallback:null,children:(0,r.jsx)(c.A,{equation:x,inline:n,onDoubleClick:()=>{m&&b(!0)}})})})}}}]);