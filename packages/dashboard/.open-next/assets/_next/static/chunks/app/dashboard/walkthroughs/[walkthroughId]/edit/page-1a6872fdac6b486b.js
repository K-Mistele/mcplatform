(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2142],{889:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var s,n=r(2317);let l=new(r(16319)).G({url:()=>"".concat(window.location.origin,"/rpc")}),i=null!=(s=globalThis.$client)?s:(0,n.I0)(l)},28290:(e,t,r)=>{"use strict";r.d(t,{$:()=>a,F:()=>i});var s=r(54568),n=r(42568),l=r(93928);function i(e){let{className:t,children:r,...i}=e;return(0,s.jsxs)(n.bL,{"data-slot":"scroll-area",className:(0,l.cn)("relative h-full max-h-full overflow-scroll",t),...i,children:[(0,s.jsx)(n.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),(0,s.jsx)(a,{}),(0,s.jsx)(n.OK,{})]})}function a(e){let{className:t,orientation:r="vertical",...i}=e;return(0,s.jsx)(n.VM,{"data-slot":"scroll-area-scrollbar",orientation:r,className:(0,l.cn)("flex touch-none p-px transition-colors select-none","vertical"===r&&"h-full w-2.5 border-l border-l-transparent","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent",t),...i,children:(0,s.jsx)(n.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},35725:(e,t,r)=>{"use strict";r.d(t,{C5:()=>v,MJ:()=>p,Rr:()=>g,eI:()=>m,lR:()=>f,lV:()=>c,zB:()=>u});var s=r(54568),n=r(79649),l=r(7620),i=r(61938),a=r(92555),o=r(93928);let c=i.Op,d=l.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(d.Provider,{value:{name:t.name},children:(0,s.jsx)(i.xI,{...t})})},x=()=>{let e=l.useContext(d),t=l.useContext(h),{getFieldState:r}=(0,i.xW)(),s=(0,i.lN)({name:e.name}),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=t;return{id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...n}},h=l.createContext({});function m(e){let{className:t,...r}=e,n=l.useId();return(0,s.jsx)(h.Provider,{value:{id:n},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",t),...r})})}function f(e){let{className:t,...r}=e,{error:n,formItemId:l}=x();return(0,s.jsx)(a.J,{"data-slot":"form-label","data-error":!!n,className:(0,o.cn)("data-[error=true]:text-destructive text-md font-bold",t),htmlFor:l,...r})}function p(e){let{...t}=e,{error:r,formItemId:l,formDescriptionId:i,formMessageId:a}=x();return(0,s.jsx)(n.DX,{"data-slot":"form-control",id:l,"aria-describedby":r?"".concat(i," ").concat(a):"".concat(i),"aria-invalid":!!r,...t})}function g(e){let{className:t,...r}=e,{formDescriptionId:n}=x();return(0,s.jsx)("p",{"data-slot":"form-description",id:n,className:(0,o.cn)("text-muted-foreground text-sm",t),...r})}function v(e){var t;let{className:r,...n}=e,{error:l,formMessageId:i}=x(),a=l?String(null!=(t=null==l?void 0:l.message)?t:""):n.children;return a?(0,s.jsx)("p",{"data-slot":"form-message",id:i,className:(0,o.cn)("text-destructive text-sm",r),...n,children:a}):null}},53634:(e,t,r)=>{"use strict";r.d(t,{HK:()=>a,WM:()=>c,wV:()=>o});var s=r(54568),n=r(26330),l=r(69080),i=r(93928);function a(e){let{className:t,...r}=e;return(0,s.jsx)(l.YZ,{"data-slot":"resizable-panel-group",className:(0,i.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...r})}function o(e){let{...t}=e;return(0,s.jsx)(l.Zk,{"data-slot":"resizable-panel",...t})}function c(e){let{withHandle:t,className:r,...a}=e;return(0,s.jsx)(l.TW,{"data-slot":"resizable-handle",className:(0,i.cn)("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",r),...a,children:t&&(0,s.jsx)("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:(0,s.jsx)(n.A,{className:"size-2.5"})})})}},69322:(e,t,r)=>{Promise.resolve().then(r.bind(r,71847)),Promise.resolve().then(r.bind(r,78901))},70111:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>a,TN:()=>c,XL:()=>o});var s=r(54568),n=r(615),l=r(93928);let i=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function a(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(i({variant:r}),t),...n})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,l.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...r})}},71847:(e,t,r)=>{"use strict";r.d(t,{ErrorBoundary:()=>o});var s=r(54568),n=r(7620),l=r(39690),i=r(70111),a=r(47227);class o extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught error:",e,t)}render(){if(this.state.hasError){var e;return this.props.fallback?this.props.fallback:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)(i.Fc,{variant:"destructive",className:"max-w-2xl mx-auto",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)(i.XL,{children:"Something went wrong"}),(0,s.jsxs)(i.TN,{className:"mt-2",children:[(0,s.jsx)("p",{className:"mb-4",children:(null==(e=this.state.error)?void 0:e.message)||"An unexpected error occurred while loading this page."}),(0,s.jsx)(a.$,{variant:"outline",size:"sm",onClick:()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},children:"Try again"})]})]})})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}},78901:(e,t,r)=>{"use strict";r.d(t,{WalkthroughEditor:()=>el});var s=r(54568),n=r(88276),l=r(27261),i=r.n(l),a=r(62942),o=r(7620),c=r(70111),d=r(64148),u=r(47227),x=r(63353),h=r(96589);function m(e){let{...t}=e;return(0,s.jsx)(h.bL,{"data-slot":"collapsible",...t})}function f(e){let{...t}=e;return(0,s.jsx)(h.R6,{"data-slot":"collapsible-trigger",...t})}function p(e){let{...t}=e;return(0,s.jsx)(h.Ke,{"data-slot":"collapsible-content",...t})}var g=r(35725),v=r(65165),j=r(28290),N=r(17129);function b(e,t){let[r,s]=(0,o.useState)(()=>t),[n,l]=(0,o.useState)(!1),i=()=>{try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return console.log(e),t}};return(0,o.useEffect)(()=>{s(i()),l(!0)},[]),[r,t=>{try{let n=t instanceof Function?t(r):t;s(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(e){console.log(e)}},n]}var F=r(25316);let w=(0,F.createServerReference)("7f286367d94ff4c0a2c49e0b69be9ef5819f4dd79e",F.callServer,void 0,F.findSourceMapURL,"updateWalkthroughStepAction");var y=r(86993),A=r(2317),S=r(86002),k=r(44057),R=r(75316),C=r(74711),E=r(27911),D=r(61938),I=r(51874),z=r(68072);let M=z.Ik({title:z.Yj().min(1,"Title is required").max(200,"Title must be 200 characters or less"),contentFields:z.Ik({version:z.eu("v1"),introductionForAgent:z.Yj().optional(),contextForAgent:z.Yj().optional(),contentForUser:z.Yj().optional(),operationsForAgent:z.Yj().optional()})}),U={course:{introductionForAgent:!1,contextForAgent:!0,contentForUser:!0,operationsForAgent:!1},installer:{introductionForAgent:!1,contextForAgent:!0,contentForUser:!0,operationsForAgent:!0},troubleshooting:{introductionForAgent:!0,contextForAgent:!0,contentForUser:!0,operationsForAgent:!0},integration:{introductionForAgent:!1,contextForAgent:!0,contentForUser:!0,operationsForAgent:!0},quickstart:{introductionForAgent:!1,contextForAgent:!1,contentForUser:!0,operationsForAgent:!1}};function O(e){var t,r,n,l;let{walkthrough:i,step:a,onSaveStatusChange:h}=e,[F,z]=(0,o.useState)({introduction:!1,context:!1,operations:!1}),[O,B]=(0,o.useState)(!1),[T,L]=(0,o.useState)(!1),$=(0,o.useRef)(!1),W=(0,o.useRef)(a.id),_=U[i.type]||{introductionForAgent:!1,contextForAgent:!1,contentForUser:!0,operationsForAgent:!1},P="walkthrough-step-draft-".concat(a.id),[V,Z,J]=b(P,null),q=(0,D.mN)({resolver:(0,y.u)(M),defaultValues:{title:a.title,contentFields:{version:"v1",introductionForAgent:(null==(t=a.contentFields)?void 0:t.introductionForAgent)||"",contextForAgent:(null==(r=a.contentFields)?void 0:r.contextForAgent)||"",contentForUser:(null==(n=a.contentFields)?void 0:n.contentForUser)||"",operationsForAgent:(null==(l=a.contentFields)?void 0:l.operationsForAgent)||""}}}),{execute:K}=(0,S.$)(w,{interceptors:[(0,A.L_)(()=>{I.oR.success("Step saved successfully"),h("saved"),Z(null),B(!1),L(!1)}),(0,A.S5)(e=>{h("error"),(0,A.Mj)(e)?I.oR.error(e.message):I.oR.error("Failed to save step")})]});(0,o.useEffect)(()=>{if(!J)return;let e=!1;if(V){var t,r,s,n;let l={title:a.title,contentFields:{version:"v1",introductionForAgent:(null==(t=a.contentFields)?void 0:t.introductionForAgent)||"",contextForAgent:(null==(r=a.contentFields)?void 0:r.contextForAgent)||"",contentForUser:(null==(s=a.contentFields)?void 0:s.contentForUser)||"",operationsForAgent:(null==(n=a.contentFields)?void 0:n.operationsForAgent)||""}};JSON.stringify(V)!==JSON.stringify(l)&&(e=!0)}B(e),L(e)},[a.id,P,V,J]),(0,o.useEffect)(()=>{let e=W.current!==a.id;if(W.current=a.id,e&&!$.current){var t,r,s,n;let e={title:a.title,contentFields:{version:"v1",introductionForAgent:(null==(t=a.contentFields)?void 0:t.introductionForAgent)||"",contextForAgent:(null==(r=a.contentFields)?void 0:r.contextForAgent)||"",contentForUser:(null==(s=a.contentFields)?void 0:s.contentForUser)||"",operationsForAgent:(null==(n=a.contentFields)?void 0:n.operationsForAgent)||""}};q.reset(e),h("saved")}},[a.id,a.title,a.contentFields,q,h]),(0,o.useEffect)(()=>{let e=q.watch(e=>{q.formState.isDirty&&$.current&&(Z(e),B(!0),h("unsaved"),L(!1))});return()=>e.unsubscribe()},[q,Z,h]),(0,o.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),q.formState.isDirty&&Y())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[q.formState.isDirty]);let Y=()=>{let e=q.getValues();h("saving"),K({stepId:a.id,title:e.title,contentFields:e.contentFields})},H=e=>{z(t=>({...t,[e]:!t[e]}))},G=e=>e.length,X=()=>{$.current=!0},Q=()=>{setTimeout(()=>{$.current=!1},100)};return(0,s.jsx)("div",{className:"h-full flex flex-col",children:(0,s.jsx)(j.F,{className:"flex-1",children:(0,s.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[T&&(0,s.jsxs)(c.Fc,{className:"mb-6",children:[(0,s.jsx)(k.A,{className:"h-4 w-4"}),(0,s.jsxs)(c.TN,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"You have unsaved changes from a previous session."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(u.$,{size:"sm",variant:"outline",onClick:()=>{V&&(q.reset(V),L(!1),q.setValue("title",V.title,{shouldDirty:!0}),V.contentFields&&Object.entries(V.contentFields).forEach(e=>{let[t,r]=e;q.setValue("contentFields.".concat(t),r,{shouldDirty:!0})}),h("unsaved"),I.oR.success("Draft restored"))},children:"Restore"}),(0,s.jsx)(u.$,{size:"sm",variant:"ghost",onClick:()=>{var e,t,r,s;Z(null),B(!1),L(!1);let n={title:a.title,contentFields:{version:"v1",introductionForAgent:(null==(e=a.contentFields)?void 0:e.introductionForAgent)||"",contextForAgent:(null==(t=a.contentFields)?void 0:t.contextForAgent)||"",contentForUser:(null==(r=a.contentFields)?void 0:r.contentForUser)||"",operationsForAgent:(null==(s=a.contentFields)?void 0:s.operationsForAgent)||""}};q.reset(n),I.oR.success("Draft discarded")},children:"Discard"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Edit Step Content"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Configure the content for this walkthrough step"})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)(u.$,{onClick:Y,disabled:!q.formState.isDirty,children:[(0,s.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]}),(0,s.jsx)(g.lV,{...q,children:(0,s.jsxs)("form",{className:"space-y-6",children:[(0,s.jsxs)(x.Zp,{children:[(0,s.jsx)(x.aR,{children:(0,s.jsx)(x.ZB,{className:"text-lg",children:"Step Title"})}),(0,s.jsx)(x.Wu,{children:(0,s.jsx)(g.zB,{control:q.control,name:"title",render:e=>{let{field:t}=e;return(0,s.jsxs)(g.eI,{children:[(0,s.jsx)(g.MJ,{children:(0,s.jsx)(v.p,{placeholder:"Enter a clear, descriptive title for this step",...t,onFocus:X,onBlur:Q})}),(0,s.jsxs)(g.Rr,{children:[G(t.value),"/200 characters"]}),(0,s.jsx)(g.C5,{})]})}})})]}),(0,s.jsx)(m,{open:F.introduction,onOpenChange:()=>H("introduction"),children:(0,s.jsxs)(x.Zp,{children:[(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(x.aR,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCAC"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(x.ZB,{className:"text-lg",children:"Introduction for Agent"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Brief context and learning objectives for this step"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[_.introductionForAgent?(0,s.jsx)(d.E,{variant:"destructive",className:"text-xs",children:"Required"}):(0,s.jsx)(d.E,{variant:"secondary",className:"text-xs",children:"Optional"}),F.introduction?(0,s.jsx)(C.A,{className:"h-4 w-4"}):(0,s.jsx)(E.A,{className:"h-4 w-4"})]})]})})}),(0,s.jsx)(p,{children:(0,s.jsx)(x.Wu,{children:(0,s.jsx)(g.zB,{control:q.control,name:"contentFields.introductionForAgent",render:e=>{let{field:t}=e;return(0,s.jsxs)(g.eI,{children:[(0,s.jsx)(g.MJ,{children:(0,s.jsx)(N.T,{placeholder:"Provide context about what this step accomplishes and what the user should learn...",rows:4,...t,onFocus:X,onBlur:Q})}),(0,s.jsxs)(g.Rr,{children:[G(t.value||"")," characters"]}),(0,s.jsx)(g.C5,{})]})}})})})]})}),(0,s.jsx)(m,{open:F.context,onOpenChange:()=>H("context"),children:(0,s.jsxs)(x.Zp,{children:[(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(x.aR,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCDD"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(x.ZB,{className:"text-lg",children:"Context for Agent"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Background knowledge and search terms for the agent"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[_.contextForAgent?(0,s.jsx)(d.E,{variant:"destructive",className:"text-xs",children:"Required"}):(0,s.jsx)(d.E,{variant:"secondary",className:"text-xs",children:"Optional"}),F.context?(0,s.jsx)(C.A,{className:"h-4 w-4"}):(0,s.jsx)(E.A,{className:"h-4 w-4"})]})]})})}),(0,s.jsx)(p,{children:(0,s.jsx)(x.Wu,{children:(0,s.jsx)(g.zB,{control:q.control,name:"contentFields.contextForAgent",render:e=>{let{field:t}=e;return(0,s.jsxs)(g.eI,{children:[(0,s.jsx)(g.MJ,{children:(0,s.jsx)(N.T,{placeholder:"Provide background information, relevant terms, and where the agent can find more details...",rows:4,...t,onFocus:X,onBlur:Q})}),(0,s.jsxs)(g.Rr,{children:[G(t.value||"")," characters"]}),(0,s.jsx)(g.C5,{})]})}})})})]})}),(0,s.jsxs)(x.Zp,{children:[(0,s.jsx)(x.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDD27"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(x.ZB,{className:"text-lg",children:"Content for User"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Main instructional content that users will see"})]}),(0,s.jsx)(d.E,{variant:"destructive",className:"text-xs ml-auto",children:"Required"})]})}),(0,s.jsx)(x.Wu,{children:(0,s.jsx)(g.zB,{control:q.control,name:"contentFields.contentForUser",render:e=>{let{field:t}=e;return(0,s.jsxs)(g.eI,{children:[(0,s.jsx)(g.MJ,{children:(0,s.jsx)(N.T,{placeholder:"Enter the main content that users will see and interact with during this step...",rows:6,...t,onFocus:X,onBlur:Q})}),(0,s.jsxs)(g.Rr,{children:[G(t.value||"")," characters • Supports Markdown"]}),(0,s.jsx)(g.C5,{})]})}})})]}),(0,s.jsx)(m,{open:F.operations,onOpenChange:()=>H("operations"),children:(0,s.jsxs)(x.Zp,{children:[(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(x.aR,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-lg",children:"⚡"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(x.ZB,{className:"text-lg",children:"Operations for Agent"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Specific actions the agent should perform"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[_.operationsForAgent?(0,s.jsx)(d.E,{variant:"destructive",className:"text-xs",children:"Required"}):(0,s.jsx)(d.E,{variant:"secondary",className:"text-xs",children:"Optional"}),F.operations?(0,s.jsx)(C.A,{className:"h-4 w-4"}):(0,s.jsx)(E.A,{className:"h-4 w-4"})]})]})})}),(0,s.jsx)(p,{children:(0,s.jsx)(x.Wu,{children:(0,s.jsx)(g.zB,{control:q.control,name:"contentFields.operationsForAgent",render:e=>{let{field:t}=e;return(0,s.jsxs)(g.eI,{children:[(0,s.jsx)(g.MJ,{children:(0,s.jsx)(N.T,{placeholder:"List specific operations like file creation, tool usage, API calls, etc...",rows:4,...t,onFocus:X,onBlur:Q})}),(0,s.jsxs)(g.Rr,{children:[G(t.value||"")," characters"]}),(0,s.jsx)(g.C5,{})]})}})})})]})})]})})]})})})}var B=r(889),T=r(85958),L=r(36083);function $(e){let{walkthrough:t,step:r}=e,[n,l]=b("walkthrough-preview-mode","raw"),[i,a]=(0,o.useState)(""),[c,x]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{if(!r)return void a("");(async()=>{x(!0);try{let e=await B.S.walkthrough.renderStep({walkthrough:{title:t.title,description:t.description,type:t.type},step:{id:r.id,title:r.title,displayOrder:r.displayOrder,contentFields:r.contentFields}});a(e)}catch(e){console.error("Error rendering template:",e),a("Error rendering template")}finally{x(!1)}})()},[null==r?void 0:r.id,null==r?void 0:r.title,null==r?void 0:r.displayOrder,null==r?void 0:r.contentFields,t.title,t.description,t.type]),r)?(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"border-b p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Preview"}),(0,s.jsxs)("div",{className:"flex rounded-md border",children:[(0,s.jsx)(u.$,{variant:"raw"===n?"default":"ghost",size:"sm",onClick:()=>l("raw"),className:"rounded-r-none border-r",children:"Raw Template"}),(0,s.jsx)(u.$,{variant:"rendered"===n?"default":"ghost",size:"sm",onClick:()=>l("rendered"),className:"rounded-l-none",children:"Rich Preview"})]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"raw"===n?"Raw template output for AI agent":"Rendered markdown preview"})]}),(0,s.jsx)(j.F,{className:"flex-1",children:(0,s.jsx)("div",{className:"p-4",children:c?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading preview..."})}):"raw"===n?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-muted border rounded-lg p-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-3",children:(0,s.jsx)(d.E,{variant:"secondary",className:"text-xs",children:"Raw Template"})}),(0,s.jsx)("pre",{className:"font-mono text-sm whitespace-pre-wrap leading-relaxed overflow-x-auto",children:i})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"This is the raw template that will be sent to AI agents."})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-background border rounded-lg p-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,s.jsx)(d.E,{variant:"secondary",className:"text-xs",children:"Rendered Preview"})}),(0,s.jsx)(L.T,{content:i,className:"max-w-none"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"This is how the content appears when rendered as rich text."})]})})})]}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(T.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Select a step to preview"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Choose a step from the navigator to see the preview"})]})})}var W=r(67876);let _=(0,F.createServerReference)("7f84bf0593c7ca0858db0cc201a93425a5f83e91c4",F.callServer,void 0,F.findSourceMapURL,"createWalkthroughStepAction"),P=(0,F.createServerReference)("7f02f1f5e5b0519b1430cc7a2bfc7d8a19c439151d",F.callServer,void 0,F.findSourceMapURL,"deleteWalkthroughStepAction"),V=(0,F.createServerReference)("7f765af7749defa96e46fcec19177c27beeb4b156e",F.callServer,void 0,F.findSourceMapURL,"reorderWalkthroughStepsAction");var Z=r(89766),J=r(69129),q=r(43497),K=r(10441),Y=r(26330),H=r(42879),G=r(73385),X=r(64529);function Q(e){let{id:t}=e,{attributes:r,listeners:n}=(0,q.gl)({id:t});return(0,s.jsxs)(u.$,{...r,...n,variant:"ghost",size:"sm",className:"h-6 w-6 p-1 text-muted-foreground hover:bg-background hover:text-foreground hover:shadow-sm border-0 hover:border cursor-grab active:cursor-grabbing rounded-md transition-all",children:[(0,s.jsx)(Y.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Drag to reorder"})]})}function ee(e){let{step:t,isSelected:r,indicators:n,onStepSelect:l,onDeleteStep:i}=e,{transform:a,transition:o,setNodeRef:c,isDragging:x}=(0,q.gl)({id:t.id});return(0,s.jsxs)("div",{ref:c,className:"group relative rounded-lg border p-3 cursor-pointer transition-colors hover:bg-muted/50 ".concat(r?"bg-primary/5 border-primary ring-1 ring-primary/20":"border-border"," ").concat(x?"opacity-50 z-10":""),onClick:()=>l(t.id),style:{transform:K.Ks.Transform.toString(a),transition:o},"data-dragging":x,children:[(0,s.jsx)("div",{className:"opacity-0 group-hover:opacity-100 absolute -left-1 top-1/2 -translate-y-1/2 transition-opacity duration-200",children:(0,s.jsx)(Q,{id:t.id})}),(0,s.jsx)("div",{className:"opacity-0 group-hover:opacity-100 absolute top-2 right-2 transition-opacity",children:(0,s.jsxs)(W.rI,{children:[(0,s.jsx)(W.ty,{asChild:!0,children:(0,s.jsx)(u.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(H.A,{className:"h-3 w-3"})})}),(0,s.jsx)(W.SQ,{align:"end",className:"w-40",children:(0,s.jsxs)(W._2,{onClick:e=>i(t,e),className:"text-destructive focus:text-destructive",children:[(0,s.jsx)(G.A,{className:"h-4 w-4 mr-2"}),"Delete Step"]})})]})}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(d.E,{variant:r?"default":"secondary",className:"text-xs font-mono",children:t.displayOrder})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium truncate ".concat(r?"text-primary":"text-foreground"),children:t.title}),(0,s.jsx)("div",{className:"flex items-center gap-1 mt-2",children:n.map((e,t)=>(0,s.jsx)("span",{className:"text-sm transition-opacity ".concat(e.filled?"opacity-100":"opacity-30"," ").concat(e.required&&!e.filled?"opacity-60":""),title:0===t?"Introduction for Agent":1===t?"Context for Agent":2===t?"Content for User (Required)":"Operations for Agent",children:e.icon},t))})]})]})]})}function et(e){let{walkthrough:t,steps:r,currentStepId:n,onStepSelect:l}=e,[i,a]=(0,o.useState)(!1),[c,x]=(0,o.useState)(r);o.useEffect(()=>{x(r)},[r]);let h=(0,Z.FR)((0,Z.MS)(Z.cA,{}),(0,Z.MS)(Z.IG,{}),(0,Z.MS)(Z.uN,{})),m=o.useMemo(()=>c.map(e=>e.id),[c]),{execute:f}=(0,S.$)(_,{interceptors:[(0,A.L_)(e=>{I.oR.success("Step created successfully"),l(e.id),a(!1)}),(0,A.S5)(e=>{(0,A.Mj)(e)?I.oR.error(e.message):I.oR.error("Failed to create step"),a(!1)})]}),{execute:p}=(0,S.$)(P,{interceptors:[(0,A.L_)(()=>{I.oR.success("Step deleted successfully")}),(0,A.S5)(e=>{(0,A.Mj)(e)?I.oR.error(e.message):I.oR.error("Failed to delete step")})]}),{execute:g}=(0,S.$)(V,{interceptors:[(0,A.L_)(()=>{I.oR.success("Steps reordered successfully")}),(0,A.S5)(e=>{(0,A.Mj)(e)?I.oR.error(e.message):I.oR.error("Failed to reorder steps"),x(r)})]}),v=(e,t)=>{if(t.stopPropagation(),confirm('Are you sure you want to delete "'.concat(e.title,'"?\n\nThis action cannot be undone.'))&&(p({stepId:e.id}),e.id===n)){let t=c.filter(t=>t.id!==e.id);t.length>0&&l(t[0].id)}},N=e=>{var t,r,s,n;let l=e.contentFields,i=[];return i.push({icon:"\uD83D\uDCAC",filled:!!(null==l||null==(t=l.introductionForAgent)?void 0:t.trim())}),i.push({icon:"\uD83D\uDCDD",filled:!!(null==l||null==(r=l.contextForAgent)?void 0:r.trim())}),i.push({icon:"\uD83D\uDD27",filled:!!(null==l||null==(s=l.contentForUser)?void 0:s.trim()),required:!0}),i.push({icon:"⚡",filled:!!(null==l||null==(n=l.operationsForAgent)?void 0:n.trim())}),i};return(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Steps"}),(0,s.jsx)(d.E,{variant:"outline",className:"font-mono text-xs",children:c.length})]}),(0,s.jsxs)(u.$,{onClick:()=>{a(!0);let e=c.length+1;f({walkthroughId:t.id,title:"Step ".concat(e)})},disabled:i,className:"w-full",size:"sm",children:[(0,s.jsx)(X.A,{className:"h-4 w-4 mr-2"}),i?"Creating...":"Add Step"]})]}),(0,s.jsx)(j.F,{className:"flex-1",children:(0,s.jsx)(Z.Mp,{collisionDetection:Z.fp,modifiers:[J.FN],onDragEnd:e=>{let{active:r,over:s}=e;if(r&&s&&r.id!==s.id){let e=m.indexOf(r.id),n=m.indexOf(s.id),l=(0,q.be)(c,e,n);x(l);let i=l.map(e=>e.id);g({walkthroughId:t.id,stepIds:i})}},sensors:h,children:(0,s.jsx)("div",{className:"p-2 space-y-1",children:c.length>0?(0,s.jsx)(q.gB,{items:m,strategy:q._G,children:c.map(e=>{let t=e.id===n,r=N(e);return(0,s.jsx)(ee,{step:e,isSelected:t,indicators:r,onStepSelect:l,onDeleteStep:v},e.id)})}):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"text-muted-foreground mb-2",children:"\uD83D\uDCDD"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:'No steps yet. Click "Add Step" to get started.'})]})})})})]})}var er=r(53634),es=r(90264);let en={course:{icon:"\uD83D\uDCDA",label:"Course"},installer:{icon:"⚙️",label:"Installer"},troubleshooting:{icon:"\uD83D\uDD27",label:"Troubleshooting"},integration:{icon:"\uD83D\uDD17",label:"Integration"},quickstart:{icon:"⚡",label:"Quickstart"}};function el(e){let{walkthroughPromise:t,stepsPromise:r,selectedStepId:l}=e,c=(0,o.use)(t),x=(0,o.use)(r),h=(0,a.useRouter)(),m=(0,a.useSearchParams)(),[f,p]=(0,o.useState)("saved"),g=l?x.find(e=>e.id===l):x[0],v=en[c.type]||{icon:"\uD83D\uDCC4",label:"Unknown"};return(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsx)("div",{className:"border-b bg-background px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(u.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,s.jsxs)(i(),{href:"/dashboard/walkthroughs",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,s.jsx)(es.w,{orientation:"vertical",className:"h-6"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:v.icon}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:c.title}),(0,s.jsx)(d.E,{variant:"secondary",children:v.label})]}),c.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:c.description})]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("saved"===f?"bg-green-500":"saving"===f?"bg-blue-500":"unsaved"===f?"bg-yellow-500":"bg-red-500")}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"saved"===f?"Saved":"saving"===f?"Saving...":"unsaved"===f?"Unsaved changes":"Error saving"})]})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,s.jsxs)(er.HK,{direction:"horizontal",className:"h-full",children:[(0,s.jsx)(er.wV,{defaultSize:25,minSize:20,className:"bg-muted/30",children:(0,s.jsx)(et,{walkthrough:c,steps:x,currentStepId:(null==g?void 0:g.id)||null,onStepSelect:e=>{let t=new URLSearchParams(m.toString());t.set("step",e),h.push("?".concat(t.toString()))}})}),(0,s.jsx)(er.WM,{withHandle:!0}),(0,s.jsx)(er.wV,{defaultSize:50,minSize:30,className:"overflow-hidden",children:g?(0,s.jsx)("div",{className:"h-full overflow-hidden",children:(0,s.jsx)(O,{walkthrough:c,step:g,onSaveStatusChange:e=>{p(e)}})}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No steps yet"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first step to start building your walkthrough."})]})})}),(0,s.jsx)(er.WM,{withHandle:!0}),(0,s.jsx)(er.wV,{defaultSize:25,minSize:20,className:"bg-background",children:(0,s.jsx)($,{walkthrough:c,step:g})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1637,1874,2102,7261,2317,4242,4728,6631,9749,6319,6618,9080,8042,7902,7472,587,8315,7358],()=>t(69322)),_N_E=e.O()}]);