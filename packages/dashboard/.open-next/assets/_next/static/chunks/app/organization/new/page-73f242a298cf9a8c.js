(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2845],{18669:(e,t,a)=>{"use strict";a.d(t,{OnboardingFlow:()=>I});var r=a(54568),s=a(47227),n=a(63353),i=a(35725),o=a(36922),l=a(93928);function c(e){let{className:t,value:a,...s}=e;return(0,r.jsx)(o.bL,{"data-slot":"progress",className:(0,l.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...s,children:(0,r.jsx)(o.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}var d=a(94073),u=a(86993),m=a(88276),x=a(49369),g=a(17277),h=a(62942),f=a(7620),p=a(61938),v=a(51874),j=a(85191);function b(e){let{organizationName:t}=e,a=(0,h.useRouter)();return(0,f.useEffect)(()=>{let e=setTimeout(()=>{a.push("/dashboard")},3e3);return()=>clearTimeout(e)},[a]),(0,r.jsxs)("div",{className:"space-y-6 animate-in fade-in-0 zoom-in-95 duration-500",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 size-12 rounded-lg bg-green-500/10 flex items-center justify-center",children:(0,r.jsx)(j.A,{className:"size-6 text-green-500"})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"All set!"}),(0,r.jsxs)("p",{className:"text-muted-foreground mt-2",children:['Your organization "',t,'" has been created successfully.']})]}),(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(x.A,{className:"size-6 animate-spin text-primary"})}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Redirecting to your dashboard..."})]})}var y=a(68072);let N=y.Ik({name:y.Yj().min(2,{message:"Organization name must be at least 2 characters."}),slug:y.Yj().min(2,{message:"Organization slug must be at least 2 characters."}).regex(/^[a-z0-9-]+$/,{message:"Slug must contain only lowercase letters, numbers, and hyphens."}),domain:y.Yj().optional().refine(e=>!e||e.length>=3,{message:"Domain must be at least 3 characters."}).refine(e=>!e||/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e),{message:"Please enter a valid domain (e.g., example.com)"}),logo:y.Yj().url({message:"Invalid logo URL"}).optional(),logoAutoDetected:y.zM().optional()});var w=a(65165),z=a(28442);function k(e){let{form:t,onLogoDetected:a}=e,s=t.watch("domain"),[n,o]=(0,f.useState)(!1),l=s?"https://img.logo.dev/".concat(s,"?token=pk_TFdOakUKSHuYLhmUlWaSbQ"):null;return(0,f.useEffect)(()=>{o(!1),t.getValues("logo")===l&&t.setValue("logo","")},[l,t]),(0,r.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right-3 duration-300",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 size-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(z.A,{className:"size-6 text-primary"})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"What's your organization's domain?"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"Enter your company domain to help us provide a better experience."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(i.zB,{control:t.control,name:"domain",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Organization Domain (optional)"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(w.p,{placeholder:"example.com",...t})}),(0,r.jsx)(i.C5,{}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter your organization's domain (e.g., company.com)"})]})}}),s&&l&&(0,r.jsx)("div",{className:"flex items-center justify-center mt-4",children:(0,r.jsxs)("div",{className:"p-4 rounded-lg border bg-muted/50 flex items-center space-x-3",children:[(0,r.jsx)("img",{src:l,alt:"".concat(s," logo"),className:"size-8 rounded",onLoad:()=>{l&&(o(!0),t.setValue("logo",l),null==a||a(l))},onError:()=>{o(!1),t.getValues("logo")===l&&t.setValue("logo","")},style:{display:n?"block":"inline"}}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:n?"Great! We found your logo automatically":"We'll try to find your logo automatically"})]})})]})]})}var A=a(31564);function V(e){let{form:t}=e;return(0,r.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right-3 duration-300",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 size-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(A.A,{className:"size-6 text-primary"})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"Add your organization logo"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"Provide a URL for your organization logo. You can always change this later."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(i.zB,{control:t.control,name:"logo",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Logo URL (optional)"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(w.p,{placeholder:"https://example.com/logo.png",...t})}),(0,r.jsx)(i.C5,{}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter a valid URL for your organization logo"})]})}}),t.watch("logo")&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"size-24 rounded-lg border-2 border-dashed border-muted-foreground/25 flex items-center justify-center overflow-hidden",children:(0,r.jsx)("img",{src:t.watch("logo"),alt:"Logo preview",className:"size-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})})})]})]})}var C=a(62927),R=a(4931),D=a(12463),L=a(36678),E=a(38158);function S(e){let{form:t,slugStatus:a,setSlugStatus:s}=e,n=t.watch("name"),o=t.watch("slug"),l=(0,C.d7)(n,500),c=e=>e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),u=async e=>{try{var t;return!!(null==(t=(await d.y.organization.checkSlug({slug:e})).data)?void 0:t.status)}catch(e){return console.error("Error checking slug:",e),!1}},m=async e=>{let t=c(e);return t?await u(t)?t:"".concat(t,"-").concat((0,E.Ak)(6).toLowerCase()):(0,E.Ak)(6).toLowerCase()};return(0,f.useEffect)(()=>{if(!l||l.length<2){s("idle"),t.setValue("slug","");return}(async()=>{s("checking");try{let e=await m(l);t.setValue("slug",e),s("available")}catch(e){console.error("Error generating slug:",e),s("error")}})()},[l,t,s]),(0,r.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right-3 duration-300",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 size-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(L.A,{className:"size-6 text-primary"})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"What's your organization called?"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"This will be the name that appears on your dashboard and in team invitations."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(i.zB,{control:t.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Organization Name"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(w.p,{placeholder:"Acme Inc.",className:"text-lg py-6",autoFocus:!0,...t})}),(0,r.jsx)(i.C5,{})]})}}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"organization-slug",className:"text-sm font-medium",children:"URL Slug"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(w.p,{id:"organization-slug",value:o,readOnly:!0,disabled:!0,className:"font-mono bg-muted",placeholder:"Will be generated automatically..."})}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"This will be automatically generated from your organization name"}),(()=>{if(!o)return null;switch(a){case"checking":return(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,r.jsx)(x.A,{className:"size-4 animate-spin"}),(0,r.jsx)("span",{children:"Checking availability..."})]});case"available":return(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[(0,r.jsx)(R.A,{className:"size-4"}),(0,r.jsxs)("span",{children:["Available: ",o]})]});case"taken":return(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-destructive",children:[(0,r.jsx)(D.A,{className:"size-4"}),(0,r.jsx)("span",{children:"Slug is taken"})]});case"error":return(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-destructive",children:[(0,r.jsx)(D.A,{className:"size-4"}),(0,r.jsx)("span",{children:"Error checking availability"})]});default:return null}})()]})]})]})}function I(e){let{session:t}=e;(0,h.useRouter)();let[a,o]=(0,f.useState)("name"),[l,j]=(0,f.useState)(!1),[y,w]=(0,f.useState)("idle"),z=(0,p.mN)({resolver:(0,u.u)(N),defaultValues:{name:"",slug:"",domain:"",logo:"",logoAutoDetected:!1}}),A=()=>{let e=z.getValues("logoAutoDetected")?3:4;switch(a){case"name":return Math.round(1/e*100);case"domain":return Math.round(2/e*100);case"logo":return Math.round(3/e*100);case"complete":return 100;default:return 0}},C=e=>{z.setValue("logoAutoDetected",!0)},R=async()=>{if("name"===a){if(!await z.trigger(["name"])||"available"!==y){"available"!==y&&v.oR.error("Please wait for slug validation to complete");return}z.getValues(),o("domain")}else if("domain"===a){if(!await z.trigger(["domain"]))return;z.getValues(),z.getValues("logoAutoDetected")?await E():o("logo")}else"logo"===a&&(z.getValues(),await E())},D=()=>{"domain"===a?o("name"):"logo"===a&&o("domain")},L=async()=>{z.setValue("domain",""),z.getValues("logoAutoDetected")?await E():o("logo")},E=async()=>{let e=z.getValues();try{j(!0),o("complete");let t=await d.y.organization.create({name:e.name,slug:e.slug,logo:e.logo||void 0,metadata:e.domain?{domain:e.domain}:void 0});if(t.error){v.oR.error("Failed to create organization",{description:t.error.message||"Please try again with a different name or slug."});let a=e.logoAutoDetected;o(a?"domain":"logo");return}}catch(e){v.oR.error("Failed to create organization",{description:"An unexpected error occurred. Please try again."}),console.error("Organization creation error:",e),o(z.getValues("logoAutoDetected")?"domain":"logo")}finally{j(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,r.jsxs)(n.Zp,{className:"w-full max-w-md",children:[(0,r.jsx)(n.aR,{className:"pb-2",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Step ",(()=>{let e=z.getValues("logoAutoDetected")?3:4;switch(a){case"name":return"1 of ".concat(e);case"domain":return"2 of ".concat(e);case"logo":return"3 of ".concat(e);case"complete":return"".concat(e," of ").concat(e);default:return"1 of 4"}})()]}),(0,r.jsxs)("span",{children:[A(),"%"]})]}),(0,r.jsx)(c,{value:A(),className:"h-2"})]})}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)(i.lV,{...z,children:[(0,r.jsx)("div",{className:"min-h-[400px]",children:(()=>{switch(a){case"name":return(0,r.jsx)(S,{form:z,slugStatus:y,setSlugStatus:w});case"domain":return(0,r.jsx)(k,{form:z,onLogoDetected:C});case"logo":return(0,r.jsx)(V,{form:z});case"complete":return(0,r.jsx)(b,{organizationName:z.getValues("name")});default:return null}})()}),(()=>{if("complete"===a)return null;let e=z.getValues("logoAutoDetected");return(0,r.jsxs)("div",{className:"flex justify-between space-x-4 pt-6",children:[(0,r.jsxs)(s.$,{type:"button",variant:"outline",onClick:D,disabled:"name"===a||l,className:"name"===a?"invisible":"",children:[(0,r.jsx)(m.A,{className:"size-4 mr-2"}),"Back"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:["domain"===a&&(0,r.jsx)(s.$,{type:"button",variant:"ghost",onClick:L,disabled:l,className:"text-muted-foreground",children:"Skip for now"}),(0,r.jsx)(s.$,{type:"button",onClick:R,disabled:l,className:"min-w-[120px]",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{className:"size-4 animate-spin mr-2"}),"Creating..."]}):"logo"===a||"domain"===a&&e?"Create Organization":(0,r.jsxs)(r.Fragment,{children:["Next",(0,r.jsx)(g.A,{className:"size-4 ml-2"})]})})]})]})})()]})})]})})}},35725:(e,t,a)=>{"use strict";a.d(t,{C5:()=>v,MJ:()=>f,Rr:()=>p,eI:()=>g,lR:()=>h,lV:()=>c,zB:()=>u});var r=a(54568),s=a(79649),n=a(7620),i=a(61938),o=a(92555),l=a(93928);let c=i.Op,d=n.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(d.Provider,{value:{name:t.name},children:(0,r.jsx)(i.xI,{...t})})},m=()=>{let e=n.useContext(d),t=n.useContext(x),{getFieldState:a}=(0,i.xW)(),r=(0,i.lN)({name:e.name}),s=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...s}},x=n.createContext({});function g(e){let{className:t,...a}=e,s=n.useId();return(0,r.jsx)(x.Provider,{value:{id:s},children:(0,r.jsx)("div",{"data-slot":"form-item",className:(0,l.cn)("grid gap-2",t),...a})})}function h(e){let{className:t,...a}=e,{error:s,formItemId:n}=m();return(0,r.jsx)(o.J,{"data-slot":"form-label","data-error":!!s,className:(0,l.cn)("data-[error=true]:text-destructive text-md font-bold",t),htmlFor:n,...a})}function f(e){let{...t}=e,{error:a,formItemId:n,formDescriptionId:i,formMessageId:o}=m();return(0,r.jsx)(s.DX,{"data-slot":"form-control",id:n,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...t})}function p(e){let{className:t,...a}=e,{formDescriptionId:s}=m();return(0,r.jsx)("p",{"data-slot":"form-description",id:s,className:(0,l.cn)("text-muted-foreground text-sm",t),...a})}function v(e){var t;let{className:a,...s}=e,{error:n,formMessageId:i}=m(),o=n?String(null!=(t=null==n?void 0:n.message)?t:""):s.children;return o?(0,r.jsx)("p",{"data-slot":"form-message",id:i,className:(0,l.cn)("text-destructive text-sm",a),...s,children:o}):null}},47227:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,r:()=>o});var r=a(54568),s=a(79649),n=a(615),i=a(93928);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:n,asChild:l=!1,...c}=e,d=l?s.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:n,className:t})),...c})}},63353:(e,t,a)=>{"use strict";a.d(t,{BT:()=>l,Wu:()=>d,X9:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>u});var r=a(54568),s=a(93928);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-action",className:(0,s.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}function u(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},65165:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(54568),s=a(93928);function n(e){let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},70666:(e,t,a)=>{Promise.resolve().then(a.bind(a,18669))},92555:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var r=a(54568),s=a(56559),n=a(93928);function i(e){let{className:t,...a}=e;return(0,r.jsx)(s.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},93928:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(32987),s=a(60607);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}a(45720).env.NEXT_PUBLIC_ROOT_DOMAIN},94073:(e,t,a)=>{"use strict";a.d(t,{y:()=>s});var r=a(58294);let s=(0,a(19335).MB)({baseURL:"http://localhost:3000",plugins:[(0,r.VY)()]})}},e=>{var t=t=>e(e.s=t);e.O(0,[1637,1874,9335,4728,8294,6934,587,8315,7358],()=>t(70666)),_N_E=e.O()}]);