(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7846],{889:(e,t,s)=>{"use strict";s.d(t,{S:()=>n});var a,r=s(2317);let i=new(s(16319)).G({url:()=>"".concat(window.location.origin,"/rpc")}),n=null!=(a=globalThis.$client)?a:(0,r.I0)(i)},53634:(e,t,s)=>{"use strict";s.d(t,{HK:()=>l,WM:()=>c,wV:()=>d});var a=s(54568),r=s(26330),i=s(69080),n=s(93928);function l(e){let{className:t,...s}=e;return(0,a.jsx)(i.YZ,{"data-slot":"resizable-panel-group",className:(0,n.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})}function d(e){let{...t}=e;return(0,a.jsx)(i.Zk,{"data-slot":"resizable-panel",...t})}function c(e){let{withHandle:t,className:s,...l}=e;return(0,a.jsx)(i.TW,{"data-slot":"resizable-handle",className:(0,n.cn)("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",s),...l,children:t&&(0,a.jsx)("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:(0,a.jsx)(r.A,{className:"size-2.5"})})})}},60839:(e,t,s)=>{"use strict";s.d(t,{UserAvatar:()=>l});var a=s(54568),r=s(93928),i=s(61773),n=s(7620);function l(e){let{image:t,fallbackValue:s,name:l,size:d="32px",className:c}=e,[o,m]=(0,n.useState)(!1),x=Number.parseInt(d.replace("px",""));return!t||o?(0,a.jsx)("div",{className:(0,r.cn)("overflow-hidden",c),children:(0,a.jsx)(i.default,{src:"/api/identicon/".concat(encodeURIComponent(s)),alt:l||"User identicon",width:x,height:x,className:"object-cover w-full h-full"})}):(0,a.jsx)("div",{className:(0,r.cn)("overflow-hidden",c),children:(0,a.jsx)(i.default,{src:t,alt:l||"User avatar",width:x,height:x,className:"object-cover w-full h-full",onError:()=>m(!0)})})}},63353:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>o,X9:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>m});var a=s(54568),r=s(93928);function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-action",className:(0,r.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},64148:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var a=s(54568),r=s(79649),i=s(615),n=s(93928);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:s,asChild:i=!1,...d}=e,c=i?r.DX:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(l({variant:s}),t),...d})}},69959:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,27261,23)),Promise.resolve().then(s.bind(s,12522)),Promise.resolve().then(s.bind(s,97673))},93928:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(32987),r=s(60607);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}s(45720).env.NEXT_PUBLIC_ROOT_DOMAIN},97673:(e,t,s)=>{"use strict";s.d(t,{UserDetailClient:()=>S});var a=s(54568),r=s(7620),i=s(64148),n=s(63353),l=s(53634),d=s(60839),c=s(46440),o=s(11794),m=s(84453),x=s(39513),u=s(85191),h=s(45774),f=s(3991),p=s(19594),v=s(27261),g=s.n(v),j=s(83922),N=s(889);function b(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function w(e){let t=Date.now()-e,s=Math.floor(t/6e4),a=Math.floor(t/36e5),r=Math.floor(t/864e5);return s<60?"".concat(s,"m ago"):a<24?"".concat(a,"h ago"):"".concat(r,"d ago")}function y(e){switch(e){case"tool_call":return(0,a.jsx)(c.A,{className:"h-4 w-4"});case"connection":return(0,a.jsx)(o.A,{className:"h-4 w-4"});case"support_request":return(0,a.jsx)(m.A,{className:"h-4 w-4"});default:return(0,a.jsx)(x.A,{className:"h-4 w-4"})}}function A(e){switch(e){case"tool_call":return"text-blue-500";case"connection":return"text-green-500";case"support_request":return"text-orange-500";default:return"text-gray-500"}}function S(e){let{user:t,connections:s,toolCalls:c,supportRequests:m,sessions:v}=e,[S,k]=(0,j.ZA)("session"),[_,I]=(0,j.ZA)("item"),[T,Z]=(0,j.ZA)("type"),[z,E]=(0,r.useState)([]),[U,B]=(0,r.useState)(!1),D=v.find(e=>e.sessionId===S)||null,C=z.find(e=>e.id===_)||null;(0,r.useEffect)(()=>{if(!S)return void E([]);(async()=>{B(!0);try{let[e,t]=await Promise.all([N.S.sessions.getToolCalls({sessionId:S}),N.S.sessions.getSupportTickets({sessionId:S})]),s=[...e.map(e=>({id:e.id,type:"tool_call",timestamp:e.createdAt||0,title:e.toolName,subtitle:"from ".concat(e.serverName),data:e})),...t.map(e=>({id:e.id,type:"support_request",timestamp:e.createdAt||0,title:e.title||"Untitled",subtitle:"from ".concat(e.serverName),data:e}))].sort((e,t)=>t.timestamp-e.timestamp);E(s)}catch(e){console.error("Error fetching session data:",e),E([])}finally{B(!1)}})()},[S]);let V=e=>{k(e),I(null),Z(null)},W=(e,t)=>{I(e),Z(t)};return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("div",{className:"px-4 lg:px-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-6 mb-6 p-6 bg-gradient-to-r from-background to-muted/20 rounded-lg border",children:[(0,a.jsx)(d.UserAvatar,{image:t.image,fallbackValue:t.trackingId||t.id,name:t.name,size:"80px",className:"h-20 w-20 rounded-full ring-2 ring-background shadow-lg"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:t.name||t.email||"Unknown User"}),t.emailVerified&&(0,a.jsxs)(i.E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,a.jsx)(u.A,{className:"h-3 w-3"}),"Verified"]})]}),t.email&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-lg text-muted-foreground mb-1",children:[(0,a.jsx)(h.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:t.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["First seen ",b(t.firstSeenAt)]})]})]})]})}),(0,a.jsxs)("div",{className:"px-4 lg:px-6",children:[(0,a.jsxs)(n.Zp,{className:"mb-6",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5"}),"Basic Information"]}),(0,a.jsx)(n.BT,{children:"Core details about this user"})]}),(0,a.jsxs)(n.Wu,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"User ID"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(i.E,{variant:"outline",className:"font-mono text-xs",children:t.id})})]}),t.trackingId&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Tracking ID"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(i.E,{variant:"secondary",className:"font-mono text-xs",children:t.trackingId})})]}),t.name&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Display Name"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t.name})]})]})]})]}),(0,a.jsx)("div",{className:"h-[600px] border rounded-lg",children:(0,a.jsxs)(l.HK,{direction:"horizontal",className:"h-full",children:[(0,a.jsx)(l.wV,{defaultSize:30,minSize:25,children:(0,a.jsxs)(n.Zp,{className:"h-full border-0 rounded-none",children:[(0,a.jsxs)(n.aR,{className:"pb-3",children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(o.A,{className:"h-5 w-5"}),"Sessions"]}),(0,a.jsx)(n.BT,{children:"User's connection sessions"})]}),(0,a.jsx)(n.Wu,{className:"p-0",children:0===v.length?(0,a.jsxs)("div",{className:"text-center py-8 px-4",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No sessions found"})]}):(0,a.jsx)("div",{className:"space-y-1 max-h-[450px] overflow-y-auto px-4 pb-4",children:v.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>V(e.sessionId),className:"w-full text-left p-3 rounded-lg border hover:bg-accent transition-colors ".concat(S===e.sessionId?"bg-accent border-primary":"bg-card"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1 text-green-500",children:(0,a.jsx)(o.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-sm truncate",children:e.title||e.serverName}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.serverName}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:w(e.connectionTimestamp)})]})]})},e.sessionId))})})]})}),(0,a.jsx)(l.WM,{withHandle:!0}),(0,a.jsx)(l.wV,{defaultSize:40,minSize:30,children:(0,a.jsxs)(n.Zp,{className:"h-full border-0 rounded-none",children:[(0,a.jsxs)(n.aR,{className:"pb-3",children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Session Activity"]}),(0,a.jsx)(n.BT,{children:D?"Activity in ".concat(D.serverName):"Select a session to view activity"})]}),(0,a.jsx)(n.Wu,{className:"p-0",children:S?U?(0,a.jsxs)("div",{className:"text-center py-8 px-4",children:[(0,a.jsx)(x.A,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2 animate-spin"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading session activity..."})]}):0===z.length?(0,a.jsxs)("div",{className:"text-center py-8 px-4",children:[(0,a.jsx)(x.A,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No activity in this session"})]}):(0,a.jsx)("div",{className:"space-y-1 max-h-[450px] overflow-y-auto px-4 pb-4",children:z.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>W(e.id,e.type),className:"w-full text-left p-3 rounded-lg border hover:bg-accent transition-colors ".concat(_===e.id?"bg-accent border-primary":"bg-card"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1 ".concat(A(e.type)),children:y(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-sm truncate",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.subtitle}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:w(e.timestamp)})]})]})},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8 px-4",children:[(0,a.jsx)(x.A,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a session to view activity"})]})})]})}),(0,a.jsx)(l.WM,{withHandle:!0}),(0,a.jsx)(l.wV,{defaultSize:30,minSize:25,children:(0,a.jsxs)(n.Zp,{className:"h-full border-0 rounded-none",children:[(0,a.jsxs)(n.aR,{className:"pb-3",children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2 text-lg",children:[C?y(C.type):(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Item Details"]}),(0,a.jsx)(n.BT,{children:C?"Details for selected item":"Select an item to view details"})]}),(0,a.jsx)(n.Wu,{className:"px-4 pb-4",children:C?(0,a.jsxs)("div",{className:"space-y-4 max-h-[450px] overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(i.E,{variant:"outline",className:A(C.type),children:C.type.replace("_"," ")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Title"}),(0,a.jsx)("div",{className:"mt-1 font-medium text-sm",children:C.title})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Timestamp"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xs",children:b(C.timestamp)})]})]}),"tool_call"===C.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Input"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto max-h-32",children:JSON.stringify(C.data.input,null,2)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Output"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto max-h-32",children:JSON.stringify(C.data.output,null,2)})})]})]}),"support_request"===C.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(i.E,{variant:"resolved"===C.data.status?"default":"secondary",children:C.data.status})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Summary"}),(0,a.jsx)("div",{className:"mt-1 text-sm",children:C.data.conciseSummary})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Actions"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(g(),{href:"/dashboard/support-tickets/".concat(C.data.id),className:"text-sm text-primary hover:underline",children:"View full ticket →"})})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.A,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select an item to view details"})]})})]})})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1637,7261,2317,3970,6319,9080,2276,587,8315,7358],()=>t(69959)),_N_E=e.O()}]);