"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6319],{16319:(e,t,r)=>{r.d(t,{G:()=>w});var a=r(37743),i=r(17999);async function s(e){let t=e.headers.get("content-disposition");if("string"==typeof t){let r=(0,i.uz)(t)??"blob",a=await e.blob();return new File([a],r,{type:a.type})}let r=e.headers.get("content-type");if(!r||r.startsWith("application/json")){let t=await e.text();return(0,a.TE)(t)}if(r.startsWith("multipart/form-data"))return await e.formData();if(r.startsWith("application/x-www-form-urlencoded"))return new URLSearchParams(await e.text());if(r.startsWith("text/event-stream")){var s=e.body;let t=s?.pipeThrough(new TextDecoderStream).pipeThrough(new i.PZ),r=t?.getReader();return new a.Nz(async()=>{for(;;){if(void 0===r)return{done:!0,value:void 0};let{done:e,value:t}=await r.read();if(e)return{done:!0,value:void 0};switch(t.event){case"message":{let e=(0,a.TE)(t.data);return(0,a.fb)(e)&&(e=(0,i.c8)(e,t)),{done:!1,value:e}}case"error":{let e=new i.NN({data:(0,a.TE)(t.data)});throw(0,i.c8)(e,t)}case"done":{let e=(0,a.TE)(t.data);return(0,a.fb)(e)&&(e=(0,i.c8)(e,t)),{done:!0,value:e}}}}},async()=>{await r?.cancel()})}if(r.startsWith("text/plain"))return await e.text();let n=await e.blob();return new File([n],"blob",{type:n.type})}var n=r(4550);class o{plugins;constructor(e=[]){this.plugins=[...e].sort((e,t)=>(e.order??0)-(t.order??0))}init(e){for(let t of this.plugins)t.init?.(e)}}class l{constructor(e,t,r={}){this.codec=e,this.sender=t,new o(r.plugins).init(r),this.interceptors=(0,a.$r)(r.interceptors),this.clientInterceptors=(0,a.$r)(r.clientInterceptors)}interceptors;clientInterceptors;call(e,t,r){return(0,a.Zc)(this.interceptors,{...r,path:e,input:t},async({path:e,input:t,...r})=>await this.#e(e,t,r))}async #e(e,t,r){let i=await this.codec.encode(e,t,r),s=await (0,a.Zc)(this.clientInterceptors,{...r,input:t,path:e,request:i},({input:e,path:t,request:r,...a})=>this.sender.call(r,a,t,e));return await this.codec.decode(s,r,e,t)}}let c={BIGINT:0,DATE:1,NAN:2,UNDEFINED:3,URL:4,REGEXP:5,SET:6,MAP:7};class u{customSerializers;constructor(e={}){if(this.customSerializers=e.customJsonSerializers??[],this.customSerializers.length!==new Set(this.customSerializers.map(e=>e.type)).size)throw Error("Custom serializer type must be unique.")}serialize(e,t=[],r=[],i=[],s=[]){for(let a of this.customSerializers)if(a.condition(e)){let n=this.serialize(a.serialize(e),t,r,i,s);return r.push([a.type,...t]),n}if(e instanceof Blob)return i.push(t),s.push(e),[e,r,i,s];if("bigint"==typeof e)return r.push([c.BIGINT,...t]),[e.toString(),r,i,s];if(e instanceof Date)return(r.push([c.DATE,...t]),Number.isNaN(e.getTime()))?[null,r,i,s]:[e.toISOString(),r,i,s];if(Number.isNaN(e))return r.push([c.NAN,...t]),[null,r,i,s];if(e instanceof URL)return r.push([c.URL,...t]),[e.toString(),r,i,s];if(e instanceof RegExp)return r.push([c.REGEXP,...t]),[e.toString(),r,i,s];if(e instanceof Set){let a=this.serialize(Array.from(e),t,r,i,s);return r.push([c.SET,...t]),a}if(e instanceof Map){let a=this.serialize(Array.from(e.entries()),t,r,i,s);return r.push([c.MAP,...t]),a}if(Array.isArray(e))return[e.map((e,a)=>void 0===e?(r.push([c.UNDEFINED,...t,a]),e):this.serialize(e,[...t,a],r,i,s)[0]),r,i,s];if((0,a.Gv)(e)){let a={};for(let n in e)("toJSON"!==n||"function"!=typeof e[n])&&(a[n]=this.serialize(e[n],[...t,n],r,i,s)[0]);return[a,r,i,s]}return[e,r,i,s]}deserialize(e,t,r,a){let i={data:e};for(let e of(r&&a&&r.forEach((e,t)=>{let r=i,s="data";e.forEach(e=>{r=r[s],s=e}),r[s]=a(t)}),t)){let t=e[0],r=i,a="data";for(let t=1;t<e.length;t++)r=r[a],a=e[t];for(let e of this.customSerializers)if(e.type===t){r[a]=e.deserialize(r[a]);break}switch(t){case c.BIGINT:r[a]=BigInt(r[a]);break;case c.DATE:r[a]=new Date(r[a]??"Invalid Date");break;case c.NAN:r[a]=Number.NaN;break;case c.UNDEFINED:r[a]=void 0;break;case c.URL:r[a]=new URL(r[a]);break;case c.REGEXP:{let[,e,t]=r[a].match(/^\/(.*)\/([a-z]*)$/);r[a]=new RegExp(e,t);break}case c.SET:r[a]=new Set(r[a]);break;case c.MAP:r[a]=new Map(r[a])}}return i.data}}class h{constructor(e,t){this.serializer=e,this.baseUrl=t.url,this.maxUrlLength=t.maxUrlLength??2083,this.fallbackMethod=t.fallbackMethod??"POST",this.expectedMethod=t.method??this.fallbackMethod,this.headers=t.headers??{}}baseUrl;maxUrlLength;fallbackMethod;expectedMethod;headers;async encode(e,t,r){let s=await (0,a.Uq)(this.expectedMethod,r,e,t),n=await (0,a.Uq)(this.headers,r,e,t),o=new URL(await (0,a.Uq)(this.baseUrl,r,e,t));o.pathname=`${o.pathname.replace(/\/$/,"")}/${e.map(encodeURIComponent).join("/")}`,void 0!==r.lastEventId&&(n=(0,i.aw)(n,{"last-event-id":r.lastEventId}));let l=this.serializer.serialize(t);if("GET"===s&&!(l instanceof FormData)&&!(0,a._p)(l)){let i=await (0,a.Uq)(this.maxUrlLength,r,e,t),c=new URL(o);if(c.searchParams.append("data",(0,a.e4)(l)),c.toString().length<=i)return{body:void 0,method:s,headers:n,url:c,signal:r.signal}}return{url:o,method:"GET"===s?this.fallbackMethod:s,headers:n,body:l,signal:r.signal}}async decode(e){let t=!(0,n.b)(e.status),r=await (async()=>{let t=!1;try{let r=await e.body();return t=!0,this.serializer.deserialize(r)}catch(e){if(!t)throw Error("Cannot parse response body, please check the response body and content-type.",{cause:e});throw Error("Invalid RPC response format.",{cause:e})}})();if(!t){var a;if((0,n.c)(r))throw(0,n.d)(r);throw new n.O((a=e.status,Object.entries(n.C).find(([,e])=>e.status===a)?.[0]??"MALFORMED_ORPC_ERROR_RESPONSE"),{status:e.status,data:{...e,body:r}})}return r}}class d{constructor(e){this.jsonSerializer=e}serialize(e){return(0,a._p)(e)?(0,n.m)(e,{value:async e=>this.#t(e,!1),error:async e=>new i.NN({data:this.#t((0,n.t)(e).toJSON(),!1),cause:e})}):this.#t(e,!0)}#t(e,t){let[r,i,s,n]=this.jsonSerializer.serialize(e),o=0===i.length?void 0:i;if(!t||0===n.length)return{json:r,meta:o};let l=new FormData;return l.set("data",(0,a.e4)({json:r,meta:o,maps:s})),n.forEach((e,t)=>{l.set(t.toString(),e)}),l}deserialize(e){return(0,a._p)(e)?(0,n.m)(e,{value:async e=>this.#r(e),error:async e=>{if(!(e instanceof i.NN))return e;let t=this.#r(e.data);return(0,n.c)(t)?(0,n.d)(t,{cause:e}):new i.NN({data:t,cause:e})}}):this.#r(e)}#r(e){if(!(e instanceof FormData))return this.jsonSerializer.deserialize(e.json,e.meta??[]);let t=JSON.parse(e.get("data"));return this.jsonSerializer.deserialize(t.json,t.meta??[],t.maps,t=>e.get(t.toString()))}}class p extends l{constructor(e,t){super(new h(new d(new u(t)),t),e,t)}}class f{fetch;toFetchRequestOptions;constructor(e){this.fetch=e?.fetch??globalThis.fetch.bind(globalThis),this.toFetchRequestOptions=e}async call(e,t,r,n){var o;let l=function(e,t={}){let r=function(e,t=new Headers){for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,e);else void 0!==a&&t.append(r,a);return t}(e.headers),s=function(e,t,r={}){let s=t.get("content-disposition");if(t.delete("content-type"),t.delete("content-disposition"),void 0!==e)return e instanceof Blob?(t.set("content-type",e.type),t.set("content-length",e.size.toString()),t.set("content-disposition",s??(0,i.c2)(e instanceof File?e.name:"blob")),e):e instanceof FormData||e instanceof URLSearchParams?e:(0,a._p)(e)?(t.set("content-type","text/event-stream"),function(e,t={}){let r,s=t.eventIteratorKeepAliveEnabled??!0,n=t.eventIteratorKeepAliveInterval??5e3,o=t.eventIteratorKeepAliveComment??"",l=!1;return new ReadableStream({async pull(t){try{s&&(r=setInterval(()=>{t.enqueue((0,i.ak)({comments:[o]}))},n));let c=await e.next();if(clearInterval(r),l)return;let u=(0,i.Kg)(c.value);c.done&&void 0===c.value&&void 0===u||t.enqueue((0,i.ak)({...u,event:c.done?"done":"message",data:(0,a.e4)(c.value)})),c.done&&t.close()}catch(e){if(clearInterval(r),l)return;t.enqueue((0,i.ak)({...(0,i.Kg)(e),event:"error",data:e instanceof i.NN?(0,a.e4)(e.data):void 0})),t.close()}},async cancel(){l=!0,clearInterval(r),await e.return?.()}}).pipeThrough(new TextEncoderStream)}(e,r)):(t.set("content-type","application/json"),(0,a.e4)(e))}(e.body,r,t);return new Request(e.url,{signal:e.signal,method:e.method,headers:r,body:s})}(e,this.toFetchRequestOptions);return o=await this.fetch(l,{redirect:"manual"},t,r,n),{body:(0,a.Oo)(()=>s(o)),status:o.status,get headers(){let e=function(e,t={}){for(let[r,a]of e)Array.isArray(t[r])?t[r].push(a):void 0!==t[r]?t[r]=[t[r],a]:t[r]=a;return t}(o.headers);return Object.defineProperty(this,"headers",{value:e,writable:!0}),e},set headers(value){Object.defineProperty(this,"headers",{value,writable:!0})}}}}class w extends p{constructor(e){super(new f(e),e)}}}}]);