(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1540],{14138:(e,t,r)=>{r.d(t,{s:()=>u});var l=r(41867),a=r(89220),n=r(62147),s=r(7620),i=r(54568);function o(e){const t=e.transform();return new Set(t?[t]:[])}const c=()=>{},d=()=>{};function u({initialEditor:e,children:t,initialNodes:r,initialTheme:u,skipCollabChecks:g,skipEditableListener:p}){const f=(0,s.useRef)(!1),h=(0,s.useContext)(a.Gu);null==h&&((e,...t)=> {const r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(const e of(l.append("code",9),t))l.append("v",e);throw r.search=l.toString(),Error(`Minified Lexical error #${9}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(9);const[m,{getTheme:x}]=h,b=(0,s.useMemo)(()=>{const t=u||x()||void 0,l=(0,a.Mx)(h,t);void 0!==t&&(e._config.theme=t),e._parentEditor=e._parentEditor||m;const s=e._createEditorArgs,i=s&&s.namespace;if(r)for(let t of(c(),i||(d(),e._config.namespace=m._config.namespace),r)){let r=null,l=null;if("function"!=typeof t){const e=t;t=e.replace,r=e.with,l=e.withKlass||null}const a=(0,n.Jvg)(e,t.getType());e._nodes.set(t.getType(),{exportDOM:a?a.exportDOM:void 0,klass:t,replace:r,replaceWithKlass:l,sharedNodeState:(0,n.j17)(t),transforms:o(t)})}else if(s&&s.nodes)i||(d(),e._config.namespace=m._config.namespace);else{const t=e._nodes=new Map(m._nodes);for(const[r,l]of(i||(e._config.namespace=m._config.namespace),t))e._nodes.set(r,{exportDOM:l.exportDOM,klass:l.klass,replace:l.replace,replaceWithKlass:l.replaceWithKlass,sharedNodeState:(0,n.j17)(l.klass),transforms:o(l.klass)})}return[e,l]},[]),{isCollabActive:v,yjsDocMap:j}=(0,l.k)(),C=g||f.current||j.has(e.getKey());return(0,s.useEffect)(()=>{C&&(f.current=!0)},[C]),(0,s.useEffect)(()=>{if(!p){const t=t=>e.setEditable(t);return t(m.isEditable()),m.registerEditableListener(t)}},[e,m,p]),(0,i.jsx)(a.Gu.Provider,{value:b,children:!v||C?t:null})}},31540:(e,t,r)=>{r.r(t),r.d(t,{UpdateInlineImageDialog:()=>N,default:()=>S});var l=r(54568),a=r(7620),n=r(97407),s=r(89220),i=r(78261),o=r(14138),c=r(14277),d=r(95224),u=r(70198),g=r(15062),p=r(62147),f=r(63392),h=r(43045),m=r(77430),x=r(92861),b=r(47227),v=r(92996),j=r(28359),C=r(65165),w=r(92555),k=r(24675);const E=new Set;function _(e){const{altText:t,className:r,imageRef:a,src:n,width:s,height:i,position:o}=e;if(!E.has(n))throw new Promise(e=>{const t=new Image;t.src=n,t.onload=()=>{E.add(n),e(null)}});return(0,l.jsx)("img",{className:r||void 0,src:n,alt:t,ref:a,"data-position":o,style:{display:"block",height:i,width:s},draggable:"false"})}function N(e){const{activeEditor:t,nodeKey:r,onClose:n}=e,s=t.getEditorState().read(()=>(0,p.nsf)(r)),[i,o]=(0,a.useState)(s.getAltText()),[c,d]=(0,a.useState)(s.getShowCaption()),[u,g]=(0,a.useState)(s.getPosition());return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(w.J,{htmlFor:"alt-text",children:"Alt Text"}),(0,l.jsx)(C.p,{id:"alt-text",placeholder:"Descriptive alternative text",onChange:e=>o(e.target.value),value:i,"data-test-id":"image-modal-alt-text-input"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(w.J,{htmlFor:"position-select",children:"Position"}),(0,l.jsxs)(k.l6,{value:u,onValueChange:e=>g(e),children:[(0,l.jsx)(k.bq,{id:"position-select",children:(0,l.jsx)(k.yv,{placeholder:"Select position"})}),(0,l.jsxs)(k.gC,{children:[(0,l.jsx)(k.eb,{value:"left",children:"Left"}),(0,l.jsx)(k.eb,{value:"right",children:"Right"}),(0,l.jsx)(k.eb,{value:"full",children:"Full Width"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(v.S,{id:"caption",checked:c,onCheckedChange:e=>d(e)}),(0,l.jsx)(w.J,{htmlFor:"caption",children:"Show Caption"})]}),(0,l.jsx)(j.Es,{children:(0,l.jsx)(b.$,{"data-test-id":"image-modal-file-upload-btn",onClick:()=>{const e={altText:i,position:u,showCaption:c};s&&t.update(()=>{s.update(e)}),n()},children:"Confirm"})})]})}function S(e){const{src:t,altText:r,nodeKey:v,width:j,height:C,showCaption:w,caption:k,position:E}=e,[S,y]=(0,f.K)(),R=(0,a.useRef)(null),D=(0,a.useRef)(null),[T,J,M]=(0,u.Y)(v),[A]=(0,s.DF)(),[L,F]=(0,a.useState)(null),I=(0,a.useRef)(null),K=(0,d.a)(),P=(0,a.useCallback)(e=>{const t=(0,p.vJq)();return T&&(0,p.RTZ)(t)&&(e.preventDefault(),T&&(0,p.RTZ)(t)&&A.update(()=>{t.getNodes().forEach(e=>{(0,m.zq)(e)&&e.remove()})})),!1},[A,T]),Z=(0,a.useCallback)(e=>{const t=(0,p.vJq)(),r=D.current;if(T&&(0,p.RTZ)(t)&&1===t.getNodes().length){if(w)return(0,p.n1P)(null),e.preventDefault(),k.focus(),!0;else if(null!==r&&r!==document.activeElement)return e.preventDefault(),r.focus(),!0}return!1},[k,T,w]),q=(0,a.useCallback)(e=>(I.current===k||D.current===e.target)&&((0,p.n1P)(null),A.update(()=>{J(!0);const e=A.getRootElement();null!==e&&e.focus()}),!0),[k,A,J]);(0,a.useEffect)(()=>{let e=!0,t=(0,g.Sd)(A.registerUpdateListener(t=>{const{editorState:r}=t;e&&F(r.read(()=>(0,p.vJq)()))}),A.registerCommand(p.MvL,(e,t)=>(I.current=t,!1),p.AcJ),A.registerCommand(p.d8p,e=>e.target===R.current&&(e.shiftKey?J(!T):(M(),J(!0)),!0),p.AcJ),A.registerCommand(p.TgX,e=>e.target===R.current&&(e.preventDefault(),!0),p.AcJ),A.registerCommand(p.w$Z,P,p.AcJ),A.registerCommand(p.gCZ,P,p.AcJ),A.registerCommand(p.RTo,Z,p.AcJ),A.registerCommand(p.Q$N,q,p.AcJ));return()=>{e=!1,t()}},[M,A,T,v,P,Z,q,J]);const $=T&&(0,p.RTZ)(L),W=T&&K;return(0,l.jsxs)(a.Suspense,{fallback:null,children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{draggable:$,children:[K&&(0,l.jsx)(b.$,{className:"image-edit-button absolute top-1 right-1",variant:"outline",ref:D,onClick:()=>{y("Update Inline Image",e=>(0,l.jsx)(N,{activeEditor:A,nodeKey:v,onClose:e}))},children:"Edit"}),(0,l.jsx)(_,{className:"max-w-full cursor-default ".concat(W?"".concat((0,p.RTZ)(L)?"draggable cursor-grab active:cursor-grabbing":""," focused ring-primary ring-2 ring-offset-2"):null),src:t,altText:r,imageRef:R,width:j,height:C,position:E})]}),w&&(0,l.jsx)("div",{className:"image-caption-container absolute right-0 bottom-1 left-0 m-0 block min-w-[100px] overflow-hidden border-t bg-white/90 p-0",children:(0,l.jsxs)(o.s,{initialEditor:k,children:[(0,l.jsx)(n.x,{}),(0,l.jsx)(x.W,{}),(0,l.jsx)(c.$,{contentEditable:(0,l.jsx)(h.a,{placeholder:"Enter a caption...",className:"ImageNode__contentEditable user-select-text word-break-break-word caret-primary relative block min-h-5 w-[calc(100%-20px)] cursor-text resize-none border-0 p-2.5 text-sm whitespace-pre-wrap outline-none",placeholderClassName:"ImageNode__placeholder text-sm text-muted-foreground overflow-hidden absolute top-2.5 left-2.5 pointer-events-none text-ellipsis user-select-none whitespace-nowrap inline-block"}),ErrorBoundary:i.R})]})})]}),S]})}},41867:(e,t,r)=>{r.d(t,{k:()=>i});var l=r(7620);const a=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],n=a[Math.floor(Math.random()*a.length)],s=(0,l.createContext)({clientID:0,color:n[1],isCollabActive:!1,name:n[0],yjsDocMap:new Map});function i(e,t){const r=(0,l.useContext)(s);return null!=e&&(r.name=e),null!=t&&(r.color=t),r}}}]);