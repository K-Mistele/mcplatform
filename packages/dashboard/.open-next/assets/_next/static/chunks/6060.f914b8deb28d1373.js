"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6060],{26060:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var o=r(54568),a=r(41867),l=r(89220),n=r(70198),s=r(15062),i=r(62147),d=r(7620),c=r(64286),b=r(47227),f=r(65165);function u(e){let{option:t,index:r,options:l,totalVotes:n,withPollNode:s}=e,{clientID:i}=(0,a.k)(),c=(0,d.useRef)(null),b=t.votes,u=-1!==b.indexOf(i),p=b.length,g=t.text;return(0,o.jsxs)("div",{className:"mb-2.5 flex flex-row items-center",children:[(0,o.jsx)("div",{className:"relative mr-2.5 flex h-[22px] w-[22px] rounded-md border border-gray-400 ".concat(u?'border-primary bg-primary after:pointer-events-none after:absolute after:top-1 after:left-2 after:m-0 after:block after:h-[9px] after:w-[5px] after:rotate-45 after:cursor-pointer after:border-r-2 after:border-b-2 after:border-solid after:border-white after:content-[""]':""),children:(0,o.jsx)("input",{ref:c,className:"absolute block h-full w-full cursor-pointer border-0 opacity-0",type:"checkbox",onChange:e=>{s(e=>{e.toggleVote(t,i)})},checked:u})}),(0,o.jsxs)("div",{className:"border-primary relative flex flex-[10px] cursor-pointer overflow-hidden rounded-md border",children:[(0,o.jsx)("div",{className:"transition-width bg-accent absolute top-0 left-0 z-0 h-full duration-1000 ease-in-out",style:{width:"".concat(0===p?0:p/n*100,"%")}}),(0,o.jsx)("span",{className:"text-primary absolute top-1.5 right-4 text-xs",children:p>0&&(1===p?"1 vote":"".concat(p," votes"))}),(0,o.jsx)(f.p,{type:"text",value:g,onChange:e=>{let r=e.target,o=r.value,a=r.selectionStart,l=r.selectionEnd;s(e=>{e.setOptionText(t,o)},()=>{r.selectionStart=a,r.selectionEnd=l})},placeholder:"Option ".concat(r+1)})]}),(0,o.jsx)("button",{disabled:l.length<3,className:"relative z-0 ml-1.5 flex h-7 w-7 cursor-pointer rounded-md border-0 bg-transparent bg-[position:6px_6px] bg-no-repeat opacity-30 before:absolute before:top-1.5 before:left-[13px] before:block before:h-[15px] before:w-0.5 before:-rotate-45 before:bg-gray-400 before:content-[''] after:absolute after:top-1.5 after:left-[13px] after:block after:h-[15px] after:w-0.5 after:rotate-45 after:bg-gray-400 after:content-[''] hover:bg-gray-100 hover:opacity-100 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:opacity-30","aria-label":"Remove",type:"button",onClick:()=>{s(e=>{e.deleteOption(t)})}})]})}function p(e){let{question:t,options:r,nodeKey:a}=e,[f]=(0,l.DF)(),p=(0,d.useMemo)(()=>r.reduce((e,t)=>e+t.votes.length,0),[r]),[g,x,h]=(0,n.Y)(a),[m,v]=(0,d.useState)(null),y=(0,d.useRef)(null),w=(0,d.useCallback)(e=>{let t=(0,i.vJq)();return g&&(0,i.RTZ)(t)&&(e.preventDefault(),f.update(()=>{t.getNodes().forEach(e=>{(0,c.q9)(e)&&e.remove()})})),!1},[f,g]);(0,d.useEffect)(()=>(0,s.Sd)(f.registerUpdateListener(e=>{let{editorState:t}=e;v(t.read(()=>(0,i.vJq)()))}),f.registerCommand(i.d8p,e=>e.target===y.current&&(e.shiftKey||h(),x(!g),!0),i.AcJ),f.registerCommand(i.w$Z,w,i.AcJ),f.registerCommand(i.gCZ,w,i.AcJ)),[h,f,g,a,w,x]);let j=(e,t)=>{f.update(()=>{let t=(0,i.nsf)(a);(0,c.q9)(t)&&e(t)},{onUpdate:t})},k=(0,i.RTZ)(m)&&g;return(0,o.jsx)("div",{className:"bg-background max-w-[600px] min-w-[400px] cursor-pointer rounded-lg border border-gray-200 select-none ".concat(k?"outline-primary outline outline-2":""),ref:y,children:(0,o.jsxs)("div",{className:"m-4 cursor-default",children:[(0,o.jsx)("h2",{className:"m-0 mb-4 text-center text-lg text-gray-600",children:t}),r.map((e,t)=>{let a=e.uid;return(0,o.jsx)(u,{withPollNode:j,option:e,index:t,options:r,totalVotes:p},a)}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(b.$,{onClick:()=>{j(e=>{e.addOption((0,c.hw)())})},size:"sm",children:"Add Option"})})]})})}},41867:(e,t,r)=>{r.d(t,{k:()=>s});var o=r(7620);let a=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],l=a[Math.floor(Math.random()*a.length)],n=(0,o.createContext)({clientID:0,color:l[1],isCollabActive:!1,name:l[0],yjsDocMap:new Map});function s(e,t){let r=(0,o.useContext)(n);return null!=e&&(r.name=e),null!=t&&(r.color=t),r}}}]);